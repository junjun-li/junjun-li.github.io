(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{420:function(s,t,a){"use strict";a.r(t);var n=a(42),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"jenkins-安装及对接-gitlab"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-安装及对接-gitlab"}},[s._v("#")]),s._v(" jenkins 安装及对接 gitlab")]),s._v(" "),a("h2",{attrs:{id:"什么是自动化-什么是-ci-cd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是自动化-什么是-ci-cd"}},[s._v("#")]),s._v(" 什么是自动化, 什么是 CI/CD")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://imgchr.com/i/sSJKtx",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://s3.ax1x.com/2021/01/02/sSJKtx.png",alt:"sSJKtx.png"}}),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"https://imgchr.com/i/sSJ11O",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://s3.ax1x.com/2021/01/02/sSJ11O.png",alt:"sSJ11O.png"}}),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"https://imgchr.com/i/sSJ6Bj",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://s3.ax1x.com/2021/01/02/sSJ6Bj.png",alt:"sSJ6Bj.png"}}),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"jenkins-ci-cd-工具鼻祖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-ci-cd-工具鼻祖"}},[s._v("#")]),s._v(" Jenkins -- CI&CD 工具鼻祖")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.jenkins.io/zh/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Jenkins 中文网"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"docker-compose-安装-jenkins"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose-安装-jenkins"}},[s._v("#")]),s._v(" docker-compose 安装 jenkins")]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("警告")]),s._v(" "),a("p",[a("code",[s._v("/usr/bin/docker")]),s._v(" 和 "),a("code",[s._v("/var/run/docker.sock")]),s._v("这两个路径不要改, 这是为了让jenkins中, 使用shell脚本的时候, 可以使用docker的命令")])]),s._v(" "),a("div",{staticClass:"language-yml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("services")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("jenkins")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("container_name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'jenkins'")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" jenkins/jenkins"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("lts\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("restart")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" always\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这一句别忘记了")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" jenkins"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("994")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'11005:8080'")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'50000:50000'")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'10051:10051'")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" /docker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("data/jenkins/data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/var/jenkins_home\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 把宿主机的docker用户,拷贝给jenkins,")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 让他有一个操作docker的权限")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" /usr/bin/docker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/usr/bin/docker\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" /var/run/docker.sock"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/var/run/docker.sock\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 运行docker-compose")]),s._v("\ndocker-compose up -d\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看log")]),s._v("\ndocker logs -f jenkins\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可能会报错, 如下图")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 给一个权限即可")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("777")]),s._v(" /docker-data/jenkins/data\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[a("a",{attrs:{href:"https://imgchr.com/i/sSoEFA",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://s3.ax1x.com/2021/01/02/sSoEFA.png",alt:"sSoEFA.png"}}),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("jenkins 刚登录需要一个初始密码, 使用如下指令, 可以看见 jenkins 的初始登录密码")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打印日志")]),s._v("\ndocker logs -f jenkins\n\n*************************************************************\n*************************************************************\n*************************************************************\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Jenkins需要初始设置。已创建管理员用户并生成密码。")]),s._v("\nJenkins initial setup is required. An admin user has been created and a password generated.\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 请使用以下密码继续安装：")]),s._v("\nPlease use the following password to proceed to installation:\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 我们需要这个登录密码")]),s._v("\nbc14b96e6bb94c2cbafb745cb50d9c28\n\nThis may also be found at: /var/jenkins_home/secrets/initialAdminPassword\n\n*************************************************************\n*************************************************************\n*************************************************************\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("如果 jenkins 已经初始化好了, 没有日志了, 就需要进入容器内部查看密码了")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入容器内部的交互式终端")]),s._v("\ndocker "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it 341a05b6de12 /bin/bash\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 密码在如下路径内")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 密码在容器内部的这个路径 => /var/jenkins_home/secrets/initialAdminPassword")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[a("a",{attrs:{href:"https://imgchr.com/i/sSzvH1",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://s3.ax1x.com/2021/01/02/sSzvH1.png",alt:"sSzvH1.png"}}),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("选择推荐插件安装")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://imgchr.com/i/spSKC8",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://s3.ax1x.com/2021/01/02/spSKC8.png",alt:"spSKC8.png"}}),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("然后等着就可以了, 取决于服务器有多牛逼, 我的比较垃圾, 2 核 4G, 等了十分钟的样子")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://imgchr.com/i/spS0v4",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://s3.ax1x.com/2021/01/02/spS0v4.png",alt:"spS0v4.png"}}),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("然后是傻瓜创建用户的操作")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://imgchr.com/i/sppYsH",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://s3.ax1x.com/2021/01/02/sppYsH.png",alt:"sppYsH.png"}}),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"https://imgchr.com/i/sppTlF",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://s3.ax1x.com/2021/01/02/sppTlF.png",alt:"sppTlF.png"}}),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"jenkins-插件的安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-插件的安装"}},[s._v("#")]),s._v(" jenkins 插件的安装")]),s._v(" "),a("p",[s._v("jenkins 的牛逼之处在于丰富的插件系统")]),s._v(" "),a("p",[s._v("点击 "),a("code",[s._v("Manage Jenkins => Manage Plugins")])]),s._v(" "),a("p",[s._v("下载插件都非常的慢, 使用清华的加速源")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/",target:"_blank",rel:"noopener noreferrer"}},[s._v("清华大学开源软件镜像站"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提醒")]),s._v(" "),a("p",[s._v("复制一下链接, 等一下要用")])]),s._v(" "),a("p",[a("a",{attrs:{href:"https://imgchr.com/i/sp98kq",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://s3.ax1x.com/2021/01/02/sp98kq.png",alt:"sp98kq.png"}}),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("链接拷贝到 jenkins 上, 如下图, 加速源就配置好了")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://imgchr.com/i/sp9aX4",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://s3.ax1x.com/2021/01/02/sp9aX4.png",alt:"sp9aX4.png"}}),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"gitlab-和-jenkins-对接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gitlab-和-jenkins-对接"}},[s._v("#")]),s._v(" gitlab 和 jenkins 对接")]),s._v(" "),a("h3",{attrs:{id:"一、生成新的公私钥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、生成新的公私钥"}},[s._v("#")]),s._v(" 一、生成新的公私钥")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -C 是大写的 否则会报错")]),s._v("\nssh-keygen -t rsa -b "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" -C "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"11776174@qq.com"')]),s._v("\nGenerating public/private rsa key pair.\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这个是公私钥的存放路径")]),s._v("\nEnter "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" to save the key "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("/Users/lijunjun/.ssh/id_rsa"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": /Users/lijunjun/Downloads/deploy\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 密文输入123456")]),s._v("\nEnter passphrase "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("empty "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" no passphrase"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 密文输入123456")]),s._v("\nEnter same passphrase again:\nYour identification has been saved "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /Users/lijunjun/Downloads/deploy.\nYour public key has been saved "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /Users/lijunjun/Downloads/deploy.pub.\nThe key fingerprint is:\nSHA256:llAYhroY6hBqQxU0EREewN/bfHSayIXLL0j1l0KgnlM "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11776174")]),s._v("@qq.com\nThe key's randomart image is:\n+---"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("RSA "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("----+\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("oX*.oo.        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".+"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("o         "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  oo. o o        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("o"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". o E "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("++ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(" X S + "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("o.  * O * o     "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("+ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" o o o      "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+----"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("SHA256"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("-----+\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br")])]),a("h3",{attrs:{id:"二、配置-gitlab"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、配置-gitlab"}},[s._v("#")]),s._v(" 二、配置 GitLab")]),s._v(" "),a("ol",[a("li",[s._v("配置密钥")])]),s._v(" "),a("p",[s._v("以管理员账号登录 GitLab，在 Gitlab 上部署密钥(注意是"),a("code",[s._v("公钥")]),s._v(")。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://pic1.zhimg.com/80/v2-0b2cc9a2f2eda263ccde187bac7dd8e0_1440w.jpg",alt:""}})]),s._v(" "),a("p",[s._v("然后回到具体项目仓库，选择要部署的 Deploy Keys，具体操作如下所示：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://pic1.zhimg.com/80/v2-a8f62947ae870ccdd40e6b36cd301bac_1440w.jpg",alt:""}})]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("配置网络请求")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://pic1.zhimg.com/80/v2-c8eb18f31021cc59ff70ebd51d7ed878_1440w.jpg",alt:""}})]),s._v(" "),a("h3",{attrs:{id:"三、配置-jenkins"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、配置-jenkins"}},[s._v("#")]),s._v(" 三、配置 jenkins")]),s._v(" "),a("ol",[a("li",[s._v("进入 Jenkins 网站，点击左侧菜单栏下的"),a("code",[s._v("凭据")]),s._v(" ，选择"),a("code",[s._v("系统")]),s._v(" ，点击"),a("code",[s._v("全局凭据")]),s._v(" 。")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://pic4.zhimg.com/80/v2-2382ef1cf747cfd357c97ebef0879853_1440w.jpg",alt:""}})]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("然后点击"),a("code",[s._v("添加凭据")]),s._v("，将之前生成的"),a("code",[s._v("私钥")]),s._v("添加到凭据中，这样 Jenkins 就可以下载 Gitlab 上的仓库代码了。")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://pic4.zhimg.com/80/v2-3f0453fe551b13d9ceff372b96718a1f_1440w.jpg",alt:""}})]),s._v(" "),a("h2",{attrs:{id:"配置-jenkins-集成任务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置-jenkins-集成任务"}},[s._v("#")]),s._v(" 配置 jenkins 集成任务")]),s._v(" "),a("h3",{attrs:{id:"一、配置源代码管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、配置源代码管理"}},[s._v("#")]),s._v(" 一、配置源代码管理")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提醒")]),s._v(" "),a("p",[s._v("如果是本地使用 docker 搭建的 gitlab,注意一定不能使用 localhost,要使用宿主机的 ip")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://pic4.zhimg.com/80/v2-f34f2d2d2cbb0e78669969e09140032f_1440w.jpg",alt:""}})]),s._v(" "),a("h3",{attrs:{id:"二、配置构建触发器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、配置构建触发器"}},[s._v("#")]),s._v(" 二、配置构建触发器")]),s._v(" "),a("p",[s._v("配置构建触发器，点击“高级”选项生成 Webhooks 所需的 Secrect Token，具体操作如下：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://pic1.zhimg.com/80/v2-31b9538313f7b23e876c2c442cc12dc4_1440w.jpg",alt:""}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://pic1.zhimg.com/80/v2-92f626a4b8cebc3d2577575012e9bf94_1440w.jpg",alt:""}})]),s._v(" "),a("h3",{attrs:{id:"三、配置-webhooks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、配置-webhooks"}},[s._v("#")]),s._v(" 三、配置 Webhooks")]),s._v(" "),a("p",[s._v("回到 GitLab 代码仓库，将之前生成的 Secrect Token 配置到 Webhooks 当中。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://pic3.zhimg.com/80/v2-bf2e58da45686e4221589349f8a75552_1440w.jpg",alt:""}})]),s._v(" "),a("h3",{attrs:{id:"四、配置构建操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、配置构建操作"}},[s._v("#")]),s._v(" 四、配置构建操作")]),s._v(" "),a("p",[s._v("配置构建操作，这里输入一段 Shell 脚本进行测试。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://pic2.zhimg.com/80/v2-03d7643f53a749ece176397d2ab4888d_1440w.jpg",alt:""}})]),s._v(" "),a("h3",{attrs:{id:"五、集成任务测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#五、集成任务测试"}},[s._v("#")]),s._v(" 五、集成任务测试")]),s._v(" "),a("p",[s._v("回到刚才配置 Webhooks 的地方，点击“测试”按钮，模拟一个“Push events” 事件。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://pic1.zhimg.com/80/v2-f5c24982bfcb07d75e1f140e65499ea8_1440w.jpg",alt:""}})]),s._v(" "),a("p",[s._v("应该可以看到 Jenkins 正常工作")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://pic2.zhimg.com/80/v2-f5f73c6f7cac19feb85194a0e4ac9c59_1440w.jpg",alt:""}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://pic4.zhimg.com/80/v2-994c651e01e3e216569a4077a2c49a73_1440w.jpg",alt:""}})])])}),[],!1,null,null,null);t.default=e.exports}}]);